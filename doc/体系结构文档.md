# 酒店预订系统体系结构文档

## 文档修改历史

| 修改人员 | 日期      | 修改原因                                   | 版本号 |
| :------: | --------- | ------------------------------------------ | ------ |
|  吴昊宇  | 2020.4.20 | 增加目录，引言，产品概述                   | 0.1    |
|  吴昊宇  | 2020.4.21 | 更改引言，产品概述                         | 0.2    |
|  吴昊宇  | 2020.4.21 | 增加逻辑视图                               | 0.3    |
|  李邦国  | 2020.4.22 | 增加运行时进程，物理部署，模块职责部分内容 | 0.4    |
|  吴昊宇  | 2020.4.22 | 增加开发包表                               | 0.5    |
|  吴昊宇  | 2020.4.22 | 更改目录                                   | 0.6    |
|  李邦国  | 2020.4.22 | 更改运行进程图，物理部署图和模块视图       | 0.7    |
|  吴昊宇  | 2020.4.22 | 增加开发包图                               | 0.8    |
|  李邦国  | 2020.4.23 | 增加层之间调用接口表                       | 0.9    |
|  吴昊宇  | 2020.4.23 | 更改逻辑视图、开发包图                     | 0.10   |
|  李邦国  | 2020.4.23 | 增加模块职责和用户界面层部分               | 0.11   |
|  李昊天  | 2020.4.24 | 增加数据层接口规范                         | 0.12   |
|  李昊天  | 2020.4.24 | 增加数据层职责                             | 0.13   |
|  李昊天  | 2020.4.24 | 增加信息视角                               | 0.14   |
|   梅昊   | 2020.4.24 | 修改信息视角内容、添加标题序号             | 0.15   |
|   梅昊   | 2020.4.24 | 增加业务逻辑层分解                         | 1.0    |
|   梅昊   | 2020.4.25 | 修改信息视角内容，修改目录                 | 1.1    |
|  吴昊宇  | 2020.5.14 | 更改目录                                   | 1.2    |
|  吴昊宇  | 2020.6.25 | 更改逻辑视图，开发包图                     | 1.3    |
|  李邦国  | 2020.6.27 | 更改用户界面层                             | 2.0    |

## 目录

[TOC]

## 1 引言

### 1.1 编制目的

​		本报告详细完成对酒店预订系统的概要设计，达到指导详细设计和开发的目的，同时实现和测试人员及用户的沟通。

​		本报告面向开发人员、测试及最终用户而编写，是了解系统的导航。

### 1.2 词汇表

|  词汇名称  | 词汇含义                                   | 备注 |
| :--------: | ------------------------------------------ | ---- |
|    vue     | 一套用于构建用户界面的渐进式JavaScript框架 | ...  |
| springboot | Java平台上的一种开源应用框架               | ...  |
|    ...     | ...                                        | ...  |

### 1.3 参考资料

无

## 2 产品概述

参考酒店预订系统用例文档和酒店预订系统软件需求规格说明中对产品的概括描述。

## 3 逻辑视图

​		酒店预订系统选择了分层式体系结构风格，将系统分为3层（presentation层、business logic层、data层）能够很好地示意整个高层抽象。presentation层包括GUI页面的实现，business logic层包含业务处理逻辑的实现，data层负责数据的持久化和访问。分层式结构的逻辑设计方案如下图所示。

![分层式结构的逻辑设计方案](https://kashimiya.oss-cn-hangzhou.aliyuncs.com/%E9%80%BB%E8%BE%91%E8%A7%86%E5%9B%BE.png)

## 4 组合视图

### 4.1 开发包图

酒店预订系统的最终开发包设计如下表所示。

|      开发包      | 依赖的其他开发包                                             |
| :--------------: | ------------------------------------------------------------ |
|      views       | adminview,hotelManagerview,hotelview,userview,marketerview,headerview |
|    headerview    | vuex,router,store                                            |
|    adminview     | vuex,router,store                                            |
| hotelManagerview | vuex,router,store                                            |
|    hotelview     | vuex,router,store                                            |
|     userview     | vuex,router,store                                            |
|   marketerview   | vuex,router,store                                            |
| admincontroller  | api,adminsbl,vo,springframework                              |
| couponcontroller | api,couponbl,vo,springframework                              |
| hotelcontroller  | api,hotelbl,po,vo,springframework,util                       |
| ordercontroller  | api,orderbl,vo,springframework                               |
|  usercontroller  | api,userbl,po,vo,springframework                             |
|   adminblimpl    | admindata,adminbl,po,vo,enums,springframework                |
|   couponblimpl   | coupondata,couponbl,po,vo,enums,springframework              |
|   hotelblimpl    | userbl,orderbl,hotelbl,userdata,hoteldata,po,vo,enums,springframework,util |
|   orderblimpl    | userbl,hotelbl,orderbl,orderdata,po,vo,springframework       |
|    userblimpl    | userbl,userdata,po,vo,springframework                        |
|     adminbl      | po,vo                                                        |
|     couponbl     | po,vo                                                        |
|     hotelbl      | po,vo                                                        |
|     orderbl      | po,vo                                                        |
|      userbl      | po,vo                                                        |
|  admindataimpl   | po,databaseutility,admindata                                 |
|  coupondataimpl  | po,databaseutility,coupondata                                |
|  hoteldataimpl   | po,databaseutility,hoteldata                                 |
|  orderdataimpl   | po,databaseutility,orderdata                                 |
|   userdataimpl   | po,databaseutility,userdata                                  |
|    admindata     | po,springframework,apache                                    |
|    coupondata    | po,springframework,apache                                    |
|    hoteldata     | po,vo,springframework,apache                                 |
|    orderdata     | po,vo,springframework,apache                                 |
|     userdata     | po,springframework,apache                                    |
|      config      | springframework                                              |
|      enums       |                                                              |
|        vo        | enums                                                        |
|        po        | enums                                                        |
|      store       | api,vue,vuex,utils,router                                    |
|      router      | views,vue                                                    |
|       api        | utils                                                        |
|      utils       | vue,store,router                                             |
|       util       |                                                              |
|       vue        |                                                              |
|       vuex       |                                                              |
| springframework  |                                                              |
|      apache      |                                                              |
| databaseutility  |                                                              |

服务器端开发包图如下图所示。

![服务器端开发包图](https://kashimiya.oss-cn-hangzhou.aliyuncs.com/3%20%281%29.png)

### 4.2 运行时进程

​        在酒店预定系统中，会有多个网页客户端进程和一个服务端进程，其进程图如图所示。结合部署图，客户端进程是在浏览器上运行，服务器端进程在服务器端机器上运行。

![](https://test-20200309.oss-cn-beijing.aliyuncs.com/%E8%BF%90%E8%A1%8C%E8%BF%9B%E7%A8%8B%E5%9B%BE%20%282%29.jpg)


### 4.3 物理部署

​        酒店预定系统中客户端运行是放在浏览器上，不需要额外的物理部署，服务器端构件是放在服务器端机器上，需要配置好JAVA环境。部署图如图所示

![icon](https://test-20200309.oss-cn-beijing.aliyuncs.com/%E7%89%A9%E7%90%86%E9%83%A8%E7%BD%B2%20%281%29.jpg)

## 5 架构设计

- 描述功能分解和如何在不同的层中安排软件模块
  - 描述架构中的对象，包含架构图
  - 描述组件接口信息
    - 包括：语法、前置条件、后置条件

### 5.1 模块职责

![](https://test-20200309.oss-cn-beijing.aliyuncs.com/%E6%A8%A1%E5%9D%97%E8%A7%86%E5%9B%BE%20%283%29.jpg)

- 各层职责

  **网页客户端各层的职责**

|    层    |                 职责                 |
| :------: | :----------------------------------: |
| 启动模块 | 负责初始化网络通信机制，启动用户界面 |
| 网络模块 |       利用 Java 查找 http 服务       |

​      **服务器端各层的职责**

|     层     |                             职责                             |
| :--------: | :----------------------------------------------------------: |
|  启动模块  |             负责初始化网络通信机制，启动用户界面             |
|  网络模块  |        利用 Java 机制开启 apache 服务，注册 http 服务        |
|   展示层   | 展示界面，对于用户界面的输入进行响应并向业务逻辑层发送用户输入的数据 |
| 业务逻辑层 |               接收展示层的数据进行数据逻辑处理               |
|   数据层   |                负责数据持久化和数据源访问接口                |

- 层之间调用接口

|        接口         | 服务调用方 | 服务提供方 |
| :-----------------: | ---------- | ---------- |
|    AdminService     | 展示层     | 业务逻辑层 |
| CouponMatchStrategy | 展示层     | 业务逻辑层 |
|    CouponService    | 展示层     | 业务逻辑层 |
|    HotelService     | 展示层     | 业务逻辑层 |
|     RoomService     | 展示层     | 业务逻辑层 |
|    OrderService     | 展示层     | 业务逻辑层 |
|   AccountService    | 展示层     | 业务逻辑层 |
|     AdminMapper     | 业务逻辑层 | 数据层     |
|    CouponMapper     | 业务逻辑层 | 数据层     |
|     HotelMapper     | 业务逻辑层 | 数据层     |
|     RoomMapper      | 业务逻辑层 | 数据层     |
|     OrderMapper     | 业务逻辑层 | 数据层     |
|    AccounrMapper    | 业务逻辑层 | 数据层     |

### 5.2 用户界面层分解

#### 5.2.1 用户界面层 职责

| 模块         | 职责                                   |
| ------------ | -------------------------------------- |
| admin        | 负责网站管理员对于系统的使用           |
| hotel        | 负责有关酒店信息以及酒店房间预定的使用 |
| hotelManager | 负责酒店管理人员对于系统的使用         |
| marketer     | 负责酒店营销人员对于系统的使用         |
| user         | 负责客户对于系统的使用                 |

- 类图

  ![](https://test-20200309.oss-cn-beijing.aliyuncs.com/%E5%B1%95%E7%A4%BA%E5%B1%82%E7%B1%BB%E5%9B%BE%20%281%29.jpg)


#### 5.2.2 用户界面层 接口规范

 1.admin模块接口规范

- addManagerModal的接口规范
- 提供的服务（供接口）

| getManagerListAPI | **语法** **无**                                         |
| ----------------- | ------------------------------------------------------- |
|                   | **前置条件** 已经存在一个managerList                    |
|                   | **后置条件** 调用adminController里面的getAllManager方法 |

| addManagerAPI | **语法**  无                                            |
| ------------- | ------------------------------------------------------- |
|               | **前置条件**  已创建一个manager对象，并输入符合输入规则 |
|               | **后置条件**  调用adminController里面的addManager方法   |

| 需要的服务（需接口）       | 作用                         |
| -------------------------- | ---------------------------- |
| adminService.getAllManager | 实现得到酒店管理员列表的逻辑 |
| adminService.addManager    | 实现添加酒店管理员的逻辑     |

- addUserModal的接口规范
- 提供的服务（供接口）

| getUserListAPI | **语法** 无                                           |
| -------------- | ----------------------------------------------------- |
|                | **前置条件**  已经存在一个userList                    |
|                | **后置条件 ** 调用adminController里面的getAllUser方法 |

| addUserAPI | **语法**  无                                         |
| ---------- | ---------------------------------------------------- |
|            | **前置条件**  已创建一个user对象，并输入符合输入规则 |
|            | **后置条件 ** 调用adminController里面的addUser方法   |

| 需要的服务（需接口）    | 作用                   |
| ----------------------- | ---------------------- |
| adminService.getAllUser | 实现得到用户列表的逻辑 |
| adminService.addUser    | 实现添加用户的逻辑     |

- addMarketModal的接口规范
- 提供的服务（供接口）

| getMarketerListAPI | **语法** 无                                               |
| ------------------ | --------------------------------------------------------- |
|                    | **前置条件**  已经存在一个marketerList                    |
|                    | **后置条件 ** 调用adminController里面的getAllMarketer方法 |

| addMarketerAPI | **语法**  无                                             |
| -------------- | -------------------------------------------------------- |
|                | **前置条件**  已创建一个marketer对象，并输入符合输入规则 |
|                | **后置条件 ** 调用adminController里面的addMarketer方法   |

| 需要的服务（需接口）        | 作用                         |
| --------------------------- | ---------------------------- |
| adminService.getAllMarketer | 实现得到网站营销员列表的逻辑 |
| adminService.addMarketer    | 实现添加网站营销员的逻辑     |

- manageUser的接口规范
- 提供的服务（供接口）

| deleteUserAPI | **语法** 无                                           |
| ------------- | ----------------------------------------------------- |
|               | **前置条件**  已经存在一个user对象                    |
|               | **后置条件 ** 调用adminController里面的DeleteUser方法 |

| 需要的服务（需接口）    | 作用               |
| ----------------------- | ------------------ |
| adminService.DeleteUser | 实现删除用户的逻辑 |

- roomList的接口规范

​      无接口

 2.hotel模块接口规范

- hotelList的接口规范
- 提供的服务（供接口）

| getHotelsAPI | **语法** **无**                                             |
| ------------ | ----------------------------------------------------------- |
|              | **前置条件** 已经存在一个hotelList                          |
|              | **后置条件** 调用hotelController里面的retrieveAllHotels方法 |

| 需要的服务（需接口）           | 作用                   |
| ------------------------------ | ---------------------- |
| hotelService.retrieveAllHotels | 实现获取所有酒店的逻辑 |

- hotelDetail的接口规范
- 提供的服务（供接口）

| getHotelByIdAPI | **语法** **无**                                              |
| --------------- | ------------------------------------------------------------ |
|                 | **前置条件** 已经存在一个hotel对象                           |
|                 | **后置条件** 调用hotelController里面的retrieveHotelDetail方法 |

| 需要的服务（需接口）             | 作用                       |
| -------------------------------- | -------------------------- |
| hotelService.retrieveHotelDetail | 实现获取酒店详细信息的逻辑 |

- hotelCard的接口规范
- 提供的服务（供接口）

| getHotelByIdAPI | **语法** **无**                                              |
| --------------- | ------------------------------------------------------------ |
|                 | **前置条件** 已经存在一个hotel对象                           |
|                 | **后置条件** 调用hotelController里面的retrieveHotelDetail方法 |

| 需要的服务（需接口）             | 作用                       |
| -------------------------------- | -------------------------- |
| hotelService.retrieveHotelDetail | 实现获取酒店详细信息的逻辑 |

- hotelOrders的接口规范
- 提供的服务（供接口）

| hotelOrdersAPI | **语法** 无                                                  |
| -------------- | ------------------------------------------------------------ |
|                | **前置条件**  已经存在一个orderList                          |
|                | **后置条件 ** 调用orderController里面的retrieveHotelOrders方法 |

| 需要的服务（需接口）             | 作用                       |
| -------------------------------- | -------------------------- |
| hotelService.retrieveHotelOrders | 实现获取所有所属订单的逻辑 |

- orderModal的接口规范
- 提供的服务（供接口）

| reserveHotelAPI | **语法** 无                                               |
| --------------- | --------------------------------------------------------- |
|                 | **前置条件**  已经新建了一个order对象，并输入符合输入规则 |
|                 | **后置条件 ** 调用orderController里面的reserveHotel方法   |

| orderMatchCouponsAPI | **语法** 无                                                  |
| -------------------- | ------------------------------------------------------------ |
|                      | **前置条件**  已经新建了一个order对象，并输入符合输入规则    |
|                      | **后置条件 ** 调用couponController里面的getOrderMatchCoupons方法 |

| 需要的服务（需接口）               | 作用                             |
| ---------------------------------- | -------------------------------- |
| orderService.addOrder              | 实现添加订单的逻辑               |
| couponService.getOrderMatchCoupons | 实现得到订单满足的所有优惠的逻辑 |

- hotelComments的接口规范
- 提供的服务（供接口）

| getCommentsByHotelIdAPI | **语法** 无                                                  |
| ----------------------- | ------------------------------------------------------------ |
|                         | **前置条件**  已经存在一个hotelComments                      |
|                         | **后置条件**  调用orderController里面的getCommentsByHotelId方法 |

| 需要的服务（需接口）              | 作用                   |
| --------------------------------- | ---------------------- |
| orderService.getCommentsByHotelId | 实现查看酒店评论的逻辑 |

3.hotelManager模块接口规范

- addCoupon的接口规范
- 提供的服务（供接口）

| hotelTargetMoneyAPI | **语法** **无**                                              |
| ------------------- | ------------------------------------------------------------ |
|                     | **前置条件** 已经创建一个coupon对象，并且输入符合输入规范    |
|                     | **后置条件** 调用couponController里面的addHotelTargetMoneyCoupon方法 |

| hotelMultiplyRoomsAPI | **语法** **无**                                              |
| --------------------- | ------------------------------------------------------------ |
|                       | **前置条件** 已经创建一个coupon对象，并且输入符合输入规范    |
|                       | **后置条件** 调用couponController里面的addHotelMultiplyRoomsCoupon方法 |

| hotelFestivalAPI | **语法** **无**                                              |
| ---------------- | ------------------------------------------------------------ |
|                  | **前置条件** 已经创建一个coupon对象，并且输入符合输入规范    |
|                  | **后置条件** 调用couponController里面的addHotelFestivalCoupon方法 |

| hotelBirthdayAPI | **语法** **无**                                              |
| ---------------- | ------------------------------------------------------------ |
|                  | **前置条件** 已经创建一个coupon对象，并且输入符合输入规范    |
|                  | **后置条件** 调用couponController里面的addHotelBirthdayCoupon方法 |

| 需要的服务（需接口）                      | 作用                       |
| ----------------------------------------- | -------------------------- |
| couponService.addHotelTargetMoneyCoupon   | 实现添加目标金额优惠的逻辑 |
| couponService.addHotelMultiplyRoomsCoupon | 实现添加多间优惠的逻辑     |
| couponService.addHotelFestivalCoupon      | 实现添加节日优惠的逻辑     |
| couponService.addHotelBirthdayCoupon      | 实现添加生日特惠的逻辑     |

- addHotelModal的接口规范
- 提供的服务（供接口）

| addHotelAPI | **语法** **无**                                          |
| ----------- | -------------------------------------------------------- |
|             | **前置条件** 已经创建一个hotel对象，并且输入符合输入规范 |
|             | **后置条件** 调用hotelController里面的createHotel方法    |

| 需要的服务（需接口）     | 作用               |
| ------------------------ | ------------------ |
| hotelService.createHotel | 实现添加酒店的逻辑 |

- addRoomModal的接口规范
- 提供的服务（供接口）

| addRoomAPI | **语法** **无**                                         |
| ---------- | ------------------------------------------------------- |
|            | **前置条件** 已经创建一个room对象，并且输入符合输入规范 |
|            | **后置条件** 调用hotelController里面的addRoomInfo方法   |

| 需要的服务（需接口）        | 作用                   |
| --------------------------- | ---------------------- |
| hotelService.insertRoomInfo | 实现添加酒店房间的逻辑 |

- coupon的接口规范
- 提供的服务（供接口）

| hotelAllCouponsAPI | **语法** **无**                                              |
| ------------------ | ------------------------------------------------------------ |
|                    | **前置条件** 已经存在一个couponList                          |
|                    | **后置条件** 调用couponController里面的getHotelAllCoupons方法 |

| 需要的服务（需接口）             | 作用                             |
| -------------------------------- | -------------------------------- |
| couponService.getHotelAllCoupons | 实现查找所有属于酒店的优惠的逻辑 |

- manageHotel的接口规范
- 提供的服务（供接口）

| deleteHotelAPI | **语法** **无**                                       |
| -------------- | ----------------------------------------------------- |
|                | **前置条件** 已经存在一个hotel对象                    |
|                | **后置条件** 调用hotelController里面的deleteHotel方法 |

| cancelOrderAPI | **语法** **无**                                      |
| -------------- | ---------------------------------------------------- |
|                | **前置条件** 已经存在一个order对象                   |
|                | **后置条件** 调用orderController里面的annulOrder方法 |

| 需要的服务（需接口）     | 作用               |
| ------------------------ | ------------------ |
| hotelService.deleteHotel | 实现删除酒店的逻辑 |
| orderService.annulOrder  | 实现取消订单的逻辑 |

4.marketer模块的接口规范

- addWebcouponModal的接口规范
- 提供的服务（供接口）

| hotelFestivalAPI | **语法** **无**                                              |
| ---------------- | ------------------------------------------------------------ |
|                  | **前置条件** 已经创建一个coupon对象，并且输入符合输入规范    |
|                  | **后置条件** 调用couponController里面的addHotelFestivalCoupon方法 |

| 需要的服务（需接口）                 | 作用                   |
| ------------------------------------ | ---------------------- |
| couponService.addHotelFestivalCoupon | 实现添加节日特惠的逻辑 |

- marketing的接口规范
- 提供的服务（供接口）

| creditDepositAPI | **语法** **无**                                        |
| ---------------- | ------------------------------------------------------ |
|                  | **前置条件** 已经存在一个user对象                      |
|                  | **后置条件** 调用userController里面的creditDeposit方法 |

| hotelAllCouponsAPI | **语法** **无**                                              |
| ------------------ | ------------------------------------------------------------ |
|                    | **前置条件** 已经存在一个marketerCouponList                  |
|                    | **后置条件** 调用couponController里面的getHotelAllCoupons方法 |

| setVipAPI | **语法** **无**                                 |
| --------- | ----------------------------------------------- |
|           | **前置条件** 已经存在一个user对象               |
|           | **后置条件** 调用userController里面的setVip方法 |

| 需要的服务（需接口）             | 作用                       |
| -------------------------------- | -------------------------- |
| userService.creditDeposit        | 实现信用充值的逻辑         |
| couponService.getHotelAllCoupons | 实现查找所有网站优惠的逻辑 |
| userService.setVip               | 实现用户会员充值的逻辑     |

5.Uesr模块接口规范

- info的接口规范
- 提供的服务

| loginAPI | **语法** **无**                                         |
| -------- | ------------------------------------------------------- |
|          | **前置条件** 已经创建一个user对象，并且输入符合输入规范 |
|          | **后置条件** 调用accountController里面的login方法       |

| getUserInfoAPI | **语法** **无**                                         |
| -------------- | ------------------------------------------------------- |
|                | **前置条件** 已经创建一个user对象                       |
|                | **后置条件** 调用accountController里面的getUserInfo方法 |

| updateUserInfoAPI | **语法** **无**                                        |
| ----------------- | ------------------------------------------------------ |
|                   | **前置条件** 已经创建一个user对象                      |
|                   | **后置条件** 调用accountController里面的updateInfo方法 |

| cancelOrderAPI | **语法** **无**                                      |
| -------------- | ---------------------------------------------------- |
|                | **前置条件** userOrderList里有Order对象              |
|                | **后置条件** 调用orderController里面的annulOrder方法 |

| 需要的服务（需接口）          | 作用                       |
| ----------------------------- | -------------------------- |
| accountService.login          | 实现登录的逻辑             |
| accountService.getUserInfo    | 实现得到用户信息的逻辑     |
| orderService.annulOrder       | 实现取消订单的逻辑         |
| accountService.updateUserInfo | 实现更新客户账号信息的逻辑 |

- orderDetail的接口规范
- 提供的服务（供接口）

| getOrderById | **语法** **无**                                           |
| ------------ | --------------------------------------------------------- |
|              | **前置条件** 已经有currentOrderId和currentOrderInfo       |
|              | **后置条件** 调用orderController里面的orderDetailById方法 |

| 需要的服务（需接口）         | 作用                   |
| ---------------------------- | ---------------------- |
| orderService.orderDetailById | 实现获取订单详情的逻辑 |

- rateHotel的接口规范
- 提供的服务（供接口）

| rateHotelAPI | **语法** **无**                                     |
| ------------ | --------------------------------------------------- |
|              | **前置条件** userOrderList里有Order对象             |
|              | **后置条件** 调用orderController里面的rateHotel方法 |

| 需要的服务（需接口）   | 作用               |
| ---------------------- | ------------------ |
| orderService.rateHotel | 实现评价酒店的逻辑 |

### 5.3 业务逻辑层分解

#### 5.3.1 业务逻辑层 职责

| 模块     | 职责                               |
| -------- | ---------------------------------- |
| adminbl  | 负责实现管理界面所需要的服务       |
| couponbl | 负责实现优惠界面所需要的服务       |
| hotelbl  | 负责实现酒店界面所需要的服务       |
| orderbl  | 负责实现订单界面所需要的服务       |
| userbl   | 负责实现对应与登录界面所需要的服务 |

#### 5.3.2 业务逻辑层 接口规范

adminbl的模块接口与规范

<table>
   <tr>
      <td colspan="3">提供的服务（供接口）</td>
   </tr>
   <tr>
      <td rowspan="3">Admin.addManager</td>
      <td>语法</td>
      <td>public ResponseVO addManager(UserForm userForm);</td>
   </tr>
   <tr>
      <td>前置条件</td>
      <td>酒店管理人员信息输入符合规则</td>
   </tr>
   <tr>
      <td>后置条件</td>
      <td>在数据库中增加酒店管理人员信息</td>
   </tr>
   <tr>
      <td rowspan="3">Admin.getAllManagers</td>
      <td>语法</td>
      <td>public ResponseVO getAllManagers();</td>
   </tr>
   <tr>
      <td>前置条件</td>
      <td>管理员已登录</td>
   </tr>
   <tr>
      <td>后置条件</td>
      <td>返回所有酒店管理人员的信息</td>
   </tr>
   <tr>
      <td colspan="3">需要的服务（需接口）</td>
   </tr>
   <tr>
      <td>AdminMapper.addManager(User user)</td>
      <td colspan="2">在数据库中插入UserPO对象</td>
   </tr>
   <tr>
      <td>AdminMapper.getAllManagers</td>
      <td  colspan="2">得到User数据库的服务与引用</td>
   </tr>
</table>


couponbl的模块接口与规范

<table>
   <tr>
      <td colspan="3">提供的服务（供接口）</td>
   </tr>
   <tr>
      <td  rowspan="3">Coupon.getOrderMatchCoupons</td>
      <td>语法</td>
      <td>public ResponseVO getOrderMatchCoupons(Integer userId,
                                           Integer hotelId,
                                           Double orderPrice,
                                           Integer roomNum,
                                           String checkIn,
                                           String checkOut);</td>
   </tr>
   <tr>
      <td>前置条件</td>
      <td>订单信息完全</td>
   </tr>
   <tr>
      <td>后置条件</td>
      <td>返回所有适用此订单的优惠策略</td>
   </tr>
   <tr>
      <td  rowspan="3">Coupon.getHotelAllCoupon</td>
      <td>语法</td>
      <td>public ResponseVO getHotelAllCoupon(Integer hotelId);</td>
   </tr>
   <tr>
      <td>前置条件</td>
      <td>数据库中存在对应的酒店</td>
   </tr>
   <tr>
      <td>后置条件</td>
      <td>返回所有此酒店的优惠策略</td>
   </tr>
   <tr>
      <td  rowspan="3">Coupon.addHoteBirthdayCoupon</td>
      <td>语法</td>
      <td>public ResponseVO addHotelBirthdayCoupon(HotelBirthdayCouponVO couponVO);</td>
   </tr>
   <tr>
      <td>前置条件</td>
      <td>数据库中存在对应的酒店</td>
   </tr>
   <tr>
      <td>后置条件</td>
      <td>增加该酒店的生日优惠策略</td>
   </tr>   
   <tr>
      <td  rowspan="3">Coupon.addHotelMultiplyRoomsCoupon</td>
      <td>语法</td>
      <td>public ResponseVO addHotelMultiplyRoomsCoupon(HotelMultiplyRoomsCouponVO couponVO);</td>
   </tr>
   <tr>
      <td>前置条件</td>
      <td>数据库中存在对应的酒店</td>
   </tr>
   <tr>
      <td>后置条件</td>
      <td>增加该酒店的生日优惠策略</td>
   </tr>
    <tr>
      <td  rowspan="3">Coupon.addHotelTargetMoneyCoupon</td>
      <td>语法</td>
      <td>public ResponseVO addHotelTargetMoneyCoupon(HotelTargetMoneyCouponVO couponVO);</td>
   </tr>
   <tr>
      <td>前置条件</td>
      <td>数据库中存在对应的酒店</td>
   </tr>
   <tr>
      <td>后置条件</td>
      <td>增加该酒店的生日优惠策略</td>
   </tr>   
    <tr>
      <td  rowspan="3">Coupon.addHotelFestivalCoupon</td>
      <td>语法</td>
      <td>public ResponseVO addHotelFestivalCoupon(HotelFestivalCouponVO couponVO);</td>
   </tr>
   <tr>
      <td>前置条件</td>
      <td>数据库中存在对应的酒店</td>
   </tr>
   <tr>
      <td>后置条件</td>
      <td>增加该酒店的生日优惠策略</td>
   </tr>
   <tr>
      <td colspan="3">需要的服务（需接口）</td>
   </tr>
   <tr>
      <td>CouponMapper.insertCoupon(Coupon coupon)</td>
      <td colspan="2">在数据库中插入优惠策略单一持久化对象</td>
   </tr>
   <tr>
      <td>CouponMapper.selectByHotelId(Integer hotelId)</td>
      <td colspan="2">得到coupon数据库的服务与引用</td>
   </tr>
</table>


hotelbl的模块接口与规范

<table>
   <tr>
      <td  colspan="3">提供的服务（供接口）</td>
   </tr>
   <tr>
      <td rowspan="3">Hotel.createHotel</td>
      <td>语法</td>
      <td>public ResponseVO createHotel(HotelVO hotelVO) throws ServiceException;</td>
   </tr>
   <tr>
      <td>前置条件</td>
      <td>无</td>
   </tr>
   <tr>
      <td>后置条件</td>
      <td>将酒店信息添加到数据库</td>
   </tr>
   <tr>
      <td rowspan="3">Hotel.retrieveAllHotels</td>
      <td>语法</td>
      <td>public ResponseVO retrieveAllHotels();</td>
   </tr>
   <tr>
      <td>前置条件</td>
      <td>无</td>
   </tr>
   <tr>
      <td>后置条件</td>
      <td>返回所有酒店信息</td>
   </tr>
   <tr>
      <td  rowspan="3">Hotel.addRoomInfo</td>
      <td>语法</td>
      <td>public ResponseVO addRoomInfo(HotelRoom hotelRoom);</td>
   </tr>
   <tr>
      <td>前置条件</td>
      <td>房间信息正确</td>
   </tr>
   <tr>
      <td>后置条件</td>
      <td>给指定的酒店添加房间</td>
   </tr>
   <tr>
      <td rowspan="3">Hotel.retrieveHotelDetail</td>
      <td>语法</td>
      <td>public ResponseVO retrieveHotelDetail(Integer hotelId);</td>
   </tr>
   <tr>
      <td>前置条件</td>
      <td>数据库中存在对应的酒店</td>
   </tr>
   <tr>
      <td>后置条件</td>
      <td>返回酒店详细信息</td>
   </tr>
   <tr>
      <td  colspan="3">需要的服务（需接口）</td>
   </tr>
   <tr>
      <td>HotelMapper.insertHotel(Hotel hotel)</td>
      <td  colspan="2">在数据库中添加收到的符合规范的酒店信息</td>
   </tr>
   <tr>
      <td>HotelMapper.selectAllHotel</td>
      <td  colspan="2">得到hotel数据库的服务与引用</td>
   </tr>
   <tr>
      <td>HotelMapper.selectById( Integer id)</td>
      <td colspan="2">根据ID进行查找单一持久化对象</td>
   </tr>
   <tr>
      <td>RoomMapper.updateRoomInfo(Integer hotelId, String roomType, Integer curNum)</td>
      <td colspan="2">在数据库中添加收到的符合规范的酒店房间信息</td>
   </tr>
   <tr>
      <td>RoomMapper.selectRoomsByHotelId( Integer hotelId)</td>
      <td colspan="2">根据酒店ID查找多个持久化对象</td>
   </tr>
   <tr>
      <td>RoomMapper.insertRoom(HotelRoom hotelRoom)</td>
      <td colspan="2">在数据库中添加收到的符合规范的房间信息</td>
   </tr>
   <tr>
      <td>RoomMapper.getRoomCurNum( Integer hotelId,String roomType)</td>
      <td colspan="2">根据ID与房间类型进行查找符合条件持久化对象的数目</td>
   </tr>
</table>


orderbl的模块接口与规范

<table>
   <tr>
      <td colspan="3">提供的服务（供接口）</td>
   </tr>
   <tr>
      <td rowspan="3">Order.reserveHotel</td>
      <td>语法</td>
      <td>public ResponseVO reserveHotel(OrderVO orderVO);</td>
   </tr>
   <tr>
      <td>前置条件</td>
      <td>用户已登录</td>
   </tr>
   <tr>
      <td>后置条件</td>
      <td>将预定订单信息添加到数据库</td>
   </tr>
    <tr>
      <td rowspan="3">Order.retrieveAllOrders</td>
      <td>语法</td>
      <td>public ResponseVO retrieveAllOrders();</td>
   </tr>
   <tr>
      <td>前置条件</td>
      <td>以酒店管理人员身份登录</td>
   </tr>
   <tr>
      <td>后置条件</td>
      <td>返回所有订单信息</td>
   </tr>
    <tr>
      <td rowspan="3">Order.retrieveUserOrders</td>
      <td>语法</td>
      <td>public  ResponseVO retrieveUserOrders(int userid);</td>
   </tr>
   <tr>
      <td>前置条件</td>
      <td>用户id存在</td>
   </tr>
   <tr>
      <td>后置条件</td>
      <td>返回指定客户所有订单信息</td>
   </tr>
   <tr>
      <td rowspan="3">Order.annulOrder</td>
      <td>语法</td>
      <td>public ResponseVO annulOrder(int orderid);</td>
   </tr>
   <tr>
      <td>前置条件</td>
      <td>用户已登录</td>
   </tr>
   <tr>
      <td>后置条件</td>
      <td>撤销订单</td>
   </tr>
   <tr>
      <td rowspan="3">Order.retrieveHotelOrders</td>
      <td>语法</td>
      <td>public ResponseVO retrieveHotelOrders(Integer hotelId) ;</td>
   </tr>
   <tr>
      <td>前置条件</td>
      <td>酒店id存在</td>
   </tr>
   <tr>
      <td>后置条件</td>
      <td>返回所有酒店的订单</td>
   </tr>
   <tr>
      <td colspan="3">需要的服务（需接口）</td>
   </tr>
   <tr>
      <td>OrderMapper.addOrder(Order order)</td>
      <td colspan="2">在数据库中添加收到的符合规范的订单信息</td>
   </tr>
   <tr>
      <td>OrderMapper.getAllOrders</td>
      <td colspan="2">得到order数据库的服务与引用</td>
   </tr>
   <tr>
      <td>OrderMapper.getUserOrders(int userid)</td>
      <td colspan="2">根据用户ID查找多个持久化对象</td>
   </tr>
   <tr>
      <td>OrderMapper.annulOrder(int orderid)</td>
      <td colspan="2">根据订单ID删除单个持久化对象</td>
   </tr>
   <tr>
      <td>OrderMapper.getOrderById(int orderid)</td>
      <td colspan="2">根据订单ID查找单个持久化对象</td>
   </tr>
</table>


userbl的模块接口与规范

<table>
   <tr>
      <td colspan="3">提供的服务（供接口）</td>
   </tr>
   <tr>
      <td rowspan="3">User.login</td>
      <td>语法</td>
      <td>public ResponseVO login(UserForm userForm);</td>
   </tr>
   <tr>
      <td>前置条件</td>
      <td>用户信息正确</td>
   </tr>
   <tr>
      <td>后置条件</td>
      <td>查找对应的User并返回结果</td>
   </tr>
   <tr>
      <td rowspan="3">User.registerAccount</td>
      <td>语法</td>
      <td>public ResponseVO registerAccount(UserVO userVO);</td>
   </tr>
   <tr>
      <td>前置条件</td>
      <td>用户信息完整</td>
   </tr>
   <tr>
      <td>后置条件</td>
      <td>为系统添加新用户</td>
   </tr>
   <tr>
      <td rowspan="3">User.getUserInfo</td>
      <td>语法</td>
      <td>public ResponseVO getUserInfo(int id);</td>
   </tr>
   <tr>
      <td>前置条件</td>
      <td>用户已登录</td>
   </tr>
   <tr>
      <td>后置条件</td>
      <td>返回用户个人信息</td>
   </tr>
   <tr>
      <td rowspan="3">User.updateInfo</td>
      <td>语法</td>
      <td>public ResponseVO updateInfo(UserInfoVO userInfoVO,@PathVariable int id);</td>
   </tr>
   <tr>
      <td>前置条件</td>
      <td>原用户存在，新用户信息完整</td>
   </tr>
   <tr>
      <td>后置条件</td>
      <td>更新用户信息到数据库</td>
   </tr>
   <tr>
      <td colspan="3">需要的服务（需接口）</td>
   </tr>
   <tr>
      <td>AccountMapper.getAccountById( int id)</td>
      <td colspan="2">得到User数据库的服务与引用</td>
   </tr>
   <tr>
      <td>AccountMapper.updateAccount( int id,  String password,String username,  String phonenumber)</td>
      <td colspan="2">在数据库中添加修改收到的符合规范的订单信息</td>
   </tr>
</table>


### 5.4 数据层分解

#### 5.4.1 数据层 职责

| 模块 | 职责                     |
| ---- | ------------------------ |
| data | 负责提供、添加与修改数据 |

- 类图

  ![](https://test-20200309.oss-cn-beijing.aliyuncs.com/%E6%95%B0%E6%8D%AE%E5%B1%82%E7%B1%BB%E5%9B%BE%20%282%29.jpg)

- 需要的服务接口

|                服务名                 | 服务                             |
| :-----------------------------------: | -------------------------------- |
| data.*Service(data目录下的一系列接口) | 每一个对象都有一个相应的数据接口 |

#### 5.4.2 数据层 接口规范

| 接口名：AdminMapper.addManager | 语法：int addManager(User user);                             |
| ------------------------------ | :----------------------------------------------------------- |
|                                | **前置条件**：收到逻辑层关于添加工作人员账户的请求           |
|                                | **后置条件**：在数据库中添加收到的符合规范的工作人员账户信息 |

| 接口名：AdminMapper.getAllManagers | 语法：List<User> getAllManagers();                         |
| ---------------------------------- | :--------------------------------------------------------- |
|                                    | **前置条件**：收到逻辑层关于获得全部工作人员账户信息的请求 |
|                                    | **后置条件**：在数据库中筛选工作人员的账户信息传回         |

| 接口名：CouponMapper.insertCoupon | 语法：int insertCoupon(Coupon coupon);                 |
| --------------------------------- | :----------------------------------------------------- |
|                                   | **前置条件**：收到逻辑层关于添加优惠券信息的请求       |
|                                   | **后置条件**：在数据库中添加收到的符合规范的优惠券信息 |

| 接口名：CouponMapper.selectByHotelId | 语法：List<Coupon> selectByHotelId(Integer hotelId);     |
| ------------------------------------ | :------------------------------------------------------- |
|                                      | **前置条件**：收到逻辑层关于根据酒店ID选择优惠券的请求   |
|                                      | **后置条件**：在数据库中根据ID筛选对应的优惠券信息并传回 |

| 接口名：HotelMapper.insertHotel | 语法：int insertHotel(Hotel hotel);                  |
| ------------------------------- | :--------------------------------------------------- |
|                                 | **前置条件**：收到逻辑层关于添加酒店信息的请求       |
|                                 | **后置条件**：在数据库中添加收到的符合规范的酒店信息 |

| 接口名：HotelMapper.selectAllHotel | 语法：List<HotelVO> selectAllHotel();              |
| ---------------------------------- | :------------------------------------------------- |
|                                    | **前置条件**：收到逻辑层关于选择全部酒店信息的请求 |
|                                    | **后置条件**：在数据库中筛选全部的酒店信息并传回   |

| 接口名：HotelMapper.selectById | 语法：HotelVO selectById( Integer id);                       |
| ------------------------------ | :----------------------------------------------------------- |
|                                | **前置条件**：收到逻辑层关于选择某个酒店的请求               |
|                                | **后置条件**：根据输入的酒店ID在数据库中筛选对应的酒店信息并传回 |

| 接口名：RoomMapper.updateRoomInfo | 语法：int updateRoomInfo(Integer hotelId, String roomType, Integer curNum); |
| --------------------------------- | :----------------------------------------------------------- |
|                                   | **前置条件**：收到逻辑层关于更新房间信息的请求               |
|                                   | **后置条件**：在数据库中添加收到的符合规范的房间信息         |

| 接口名：RoomMapper.selectRoomsByHotelId | 语法：List<HotelRoom> selectRoomsByHotelId( Integer hotelId); |
| --------------------------------------- | :----------------------------------------------------------- |
|                                         | **前置条件**：收到逻辑层关于选择某个酒店房间的请求           |
|                                         | **后置条件**：根据酒店ID在数据库中筛选对应的房间信息并传回   |

| 接口名：RoomMapper.insertRoom | 语法：int insertRoom(HotelRoom hotelRoom);           |
| ----------------------------- | :--------------------------------------------------- |
|                               | **前置条件**：收到逻辑层关于添加房间的请求           |
|                               | **后置条件**：在数据库中添加收到的符合规范的房间信息 |

| 接口名：RoomMapper.getRoomCurNum | 语法：int getRoomCurNum( Integer hotelId,String roomType);   |
| -------------------------------- | :----------------------------------------------------------- |
|                                  | **前置条件**：收到逻辑层关于查看某个类型的房间的剩余数的请求 |
|                                  | **后置条件**：根据酒店ID与房间类型在数据库中筛选对应类型房间并传回未被入住的房间的数量 |

| 接口名：OrderMapper.addOrder | 语法：int addOrder(Order order);               |
| ---------------------------- | :--------------------------------------------- |
|                              | **前置条件**：收到逻辑层关于添加订单的请求     |
|                              | **后置条件**：在数据库中添加符合规范的订单信息 |

| 接口名：OrderMapper.getAllOrders | 语法：List<Order> getAllOrders();                  |
| -------------------------------- | :------------------------------------------------- |
|                                  | **前置条件**：收到逻辑层关于得到全部订单信息的请求 |
|                                  | **后置条件**：在数据库中筛选全部订单信息并返回     |

| 接口名：OrderMapper.getUserOrders | 语法：List<Order> getUserOrders(int userid);                 |
| --------------------------------- | :----------------------------------------------------------- |
|                                   | **前置条件**：收到逻辑层关于查看某个用户的全部订单信息的请求 |
|                                   | **后置条件**：根据用户ID在数据库中筛选对应的订单信息并传回   |

| 接口名：OrderMapper.annulOrder | 语法：int annulOrder(int orderid);                 |
| ------------------------------ | :------------------------------------------------- |
|                                | **前置条件**：收到逻辑层关于取消某个订单的请求     |
|                                | **后置条件**：根据订单ID在数据库中删除对应订单信息 |

| 接口名：OrderMapper.getOrderById | 语法：Order getOrderById(int orderid);                   |
| -------------------------------- | :------------------------------------------------------- |
|                                  | **前置条件**：收到逻辑层关于获得某个订单信息的请求       |
|                                  | **后置条件**：根据订单ID在数据库中筛选对应订单信息并传回 |

| 接口名：AccountMapper.createNewAccount | 语法：int createNewAccount(User user);             |
| -------------------------------------- | :------------------------------------------------- |
|                                        | **前置条件**：收到逻辑层关于创建新的账户的请求     |
|                                        | **后置条件**：在数据库中添加符合规范的用户账户信息 |

| 接口名：AccountMapper.getAccountByName | 语法：User getAccountByName(String email);                |
| -------------------------------------- | :-------------------------------------------------------- |
|                                        | **前置条件**：收到逻辑层关于根据用户名查找用户信息的请求  |
|                                        | **后置条件**：根据email在数据库中筛选对应的用户信息并传回 |

| 接口名：AccountMapper.getAccountById | 语法：User getAccountById( int id);                        |
| ------------------------------------ | :--------------------------------------------------------- |
|                                      | **前置条件**：收到逻辑层关于根据用户ID查找用户信息的请求   |
|                                      | **后置条件**：根据用户ID在数据库中筛选对应的用户信息并传回 |

| 接口名：AccountMapper.updateAccount | 语法：int updateAccount( int id,  String password,String username,  String phonenumber); |
| ----------------------------------- | :----------------------------------------------------------- |
|                                     | **前置条件**：收到逻辑层关于更新用户信息的请求               |
|                                     | **后置条件**：根据用户ID在数据库中筛选对应的用户并更新对应信息 |

## 6 信息视角

### 6.1 数据持久化对象

系统的PO类就是对应的相关的实体类，在此只作简单介绍。

- CouponPO类包含优惠券的Id、描述、酒店Id、优惠种类、优惠名称、来源、使用门槛、扣折金额、可用时间、失效时间、状态这些属性。

持久化用户对象CouponPO的定义如下所示：

```java
public class CouponPO implements Serilizable{
    int id;
    String description;
    int hotelid;
    int coupontype;
    String couponName;
    int target_money;
    double discount;
    int status;
    String start_time;
    String end_time;
    int discount_money;
    
    public UserPO(int id, String description, int hotelid, int coupontype, String couponName, int target_money, double discount, int status, String start_time, String end_time, int discount_money){
        this.id = id;
        this.description = description;
        this.hotelid = hotelid;
        this.coupontype = coupontype;
        this.couponName = couponName;
        this.target_money = target_money;
        this.discount = discount;
        this.status = status;
        this.start_time = start_time;
        this.end_time = end_time;
        this.discount_money = discount_money;
    }
    public int getId(){
        return id;
    }
    public String getDescription(){
        return description;
    }
    public int getHotelid(){
        return hotelid;
    }
    public int getCoupontype(){
        return coupontype;
    }
    public String getCouponName(){
        return couponName;
    }
    public int getTarget_money(){
        return target_money;
    }
    public double getDiscount(){
        return discount;
    }
    public int getStatus(){
        return status;
    }
    public string getStart_time(){
        return start_time;
    }
    public string getEnd_time(){
        return end_time;
    }
    public int getDiscount_money(){
        return discount_money;
    }
}
```

- HotelPO类包含酒店的Id、名称、地址、所处商圈、酒店星级、酒店排名、酒店描述、酒店联系电话、酒店管理员Id这些属性。

持久化用户对象HotelPO的定义如下所示：

```java
public class HotelPO implements Serilizable{
    int id;
    String hotelName;
    String hotelDescription;
    String address;
    String bizRegion;
    double hotelStar;
    int phoneNum;
    double rate;
    int manager_id;
    
    public UserPO(int id, String hotelName, String hotelDescription, String address, String bizRegion, double hotelStar, int phoneNum, double rate, int manager_id){
        this.id = id;
        this.hotelName = hotelName;
        this.hotelDescription = hotelDescription;
        this.address = address;
        this.bizRegion = bizRegion;
        this.hotelStar = hotelStar;
        this.phoneNum = phoneNum;
        this.rate = rate;
        this.manager_id = manager_id;
    }
    public int getId(){
        return id;
    }
    public String getHotelName(){
        return hotelName;
    }
    public String getHotelDescription(){
        return hotelDescription;
    }
    public String getAddress(){
        return address;
    }
    public String getBizRegion(){
        return bizRegion;
    }
    public double getHotelStar(){
        return hotelStar;
    }
    public int getPhoneNum(){
        return phoneNum;
    }
    public double getRate(){
        return rate;
    }
    public int getManager_id(){
        return manager_id;
    }
}
```

- HotelRoomPO类包含酒店房间的Id、类别、所属酒店Id、价格、剩余可预订房间数量、总数这些属性。     

持久化用户对象HotelRoomPO的定义如下所示：

```java
public class HotelRoomPO implements Serilizable{
    int id;
    double price;
    int curNum;
    int total;
    RoomType roomType;
    int hotel_id;
    
    public UserPO(int id, double price, int curNum, int total, RoomType roomType, int hotel_id){
        this.id = id;
        this.price = price;
        this.curNum = curNum;
        this.total = total;
        this.roomType = roomType;
        this.hotel_id = hotel_id;
    }
    public int getId(){
        return id;
    }
    public double getPrice(){
        return price;
    }
    public int getCurNum(){
        return curNum;
    }
    public int getTotal(){
        return total;
    }
    public RoomType getRoomType(){
        return roomType;
    }
    public int getHotel_id(){
        return hotel_id;
    }
}
```

- OrderPO类包含订单的Id、订单所属用户的Id、订单包含的酒店的Id、订单包含的酒店的名字、入住时间、离开时间、房间类型、房间数量、入住人数、是否有儿童、订单生成时间、价格、客户名字、客户手机号、订单状态这些属性。

持久化用户对象OrderPO的定义如下所示：

```java
public class OrderPO implements Serilizable{
    int id;
    int userId;
    int hotelId;
    String hotelName;
    String checkInDate;
    String checkOutDate;
    String roomType;
    int roomNum;
    int peopleNum;
    String haveChild;
    String createDate;
    decimal price;
    String clientName;
    String phoneNumber;
    String orderState;
    
    public UserPO(int id, int userId, int hotelId, String hotelName, String checkInDate ,String checkOutDate, String roomType, int roomNum, int peopleNum, String haveChild, String createDate, decimal price, String clientName, String phoneNumber, String orderState){
        this.id = id;
        this.userId = userId;
        this.hotelId = hotelId;
        this.hotelName = hotelName;
        this.checkInDate = checkInDate;
        this.checkOutDate = checkOutDate;
        this.roomType = roomType;
        this.roomNum = roomNum;
        this.peopleNum = peopleNum;
        this.haveChild = haveChild;
        this.createDate = createDate;
        this.price = price;
        this.clientName = clientName;
        this.phoneNumber = phoneNumber;
        this.orderState = orderState;
    }
    public int getId(){
        return id;
    }
    public int getUserId(){
        return userId;
    }
    public int getHotelId(){
        return hotelId;
    }
    public String getHotelName(){
        return hotelName;
    }
    public String getCheckInDate(){
        return checkInDate;
    }
    public String getCheckOutDate(){
        return checkOutDate;
    }
    public String getRoomType(){
        return roomType;
    }
    public int getRoomNum(){
        return roomNum;
    }
    public int getPeopleNum(){
        return peopleNum;
    }
    public  getHcreateDateaveChild(){
        return haveChild;
    }
    public  getCreateDate(){
        return createDate;
    }
    public decimal getPrice(){
        return price;
    }
    public  getClientName(){
        return clientName;
    }
    public  getPhoneNumber(){
        return phoneNumber;
    }
    public  getOrderState(){
        return orderState;
    }
    
}
```

- UserPO类包含了用户的Id、邮箱、密码、用户名、手机号、信用、用户类型这些属性。

持久化用户对象UserPO的定义如下所示：

```java
public class UserPO implements Serilizable{
    int id;
    String email;
    String password;
    String username;
    String phonenumber;
    double credit;
    UserType usertype;
    
    public UserPO(int id, String email, String password, String username, String phonenumber, double credit, UserType usertype){
        this.id = id;
        this.password = password;
        this.email = email;
        this.username = username;
        this.usertype = usertype;
        this.phonenumber = phonenumber;
        this.credit = credit;
    }
    public int getId(){
        return id;
    }
    public String getEmail(){
        return email;
    }
    public String getPassword(){
        return password;
    }
    public String getUsername(){
        return username;
    }
    public String getPhonenumber(){
        return phonenumber;
    }
    public double getCredit(){
        return credit;
    }
    public UserType getCreditScore(){
        return creditScore;
    }
}
```

### 6.2 Txt持久化格式

- Coupon.txt每行对应优惠券的Id、类型、描述、来源、使用门槛、名称、扣折、优惠金额、可用时间、失效时间、状态。中间用":"隔开。
- Hotel.txt每行对应酒店的Id、名称、地址、所处商圈、酒店星级、酒店排名、酒店描述、酒店联系电话、酒店管理员Id。中间用":"隔开。
- HotelRoom.txt每行对应酒店房间的Id、类别、所属酒店Id、价格、剩余可预订房间数量、总数。中间用":"隔开。
- Order.txt每行对应订单的Id、订单所属用户的Id、订单包含的酒店的Id、订单包含的酒店的名字、入住时间、离开时间、房间类型、房间数量、入住人数、是否有儿童、订单生成时间、价格、客户名字、客户手机号、订单状态。中间用":"隔开。
- User.txt每行用户的Id、邮箱、密码、用户名、手机号、信用、用户类型。中间用":"隔开。

### 6.3 数据库表

- 数据库中包含包含Coupon表、Hotel表、OrderList表、Room表、User表。 